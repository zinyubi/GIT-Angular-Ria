
/* ============= Top navigation bar (compact, sticky) ============= */
.top-nav {
  position: sticky;
  inset-block-start: calc(env(safe-area-inset-top, 0px) + 0px);
  z-index: 900;

  display: flex;
  justify-content: center;
  align-items: center;
  inline-size: 100%;
  padding: clamp(4px, 0.5vw, 8px);

  background: color-mix(in srgb, var(--color-surface) 92%, transparent 8%);
  backdrop-filter: var(--blur);
  border: 1px solid var(--color-border);
  border-radius: var(--radius);

  margin-block: clamp(6px, 0.6vw, 10px);
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: thin;

  /* Keep scroll local; prevent the page from rubber-banding horizontally */
  overscroll-behavior-inline: contain;
}

/* Inline menu list */
.top-nav ul {
  display: inline-flex;
  align-items: center;
  gap: clamp(.6rem, 1.4vw, 1.4rem);
  list-style: none;
  padding: 0;
  margin: 0;
  white-space: nowrap;

  /* Smooth horizontal scrubbing on small screens */
  scroll-snap-type: x mandatory;
}

/* Each item snaps nicely when scrolled */
.top-nav li {
  scroll-snap-align: start;
  position: relative;
}

/* Links — lighter, denser */
.top-nav a {
  position: relative;
  display: inline-block;
  padding: .45rem .6rem; /* compact hit target */
  margin: 0;
  font-weight: 600;
  color: var(--color-text);
  text-decoration: none;
  border-radius: calc(var(--radius) - 6px);
  transition:
    color var(--transition),
    background-color var(--transition),
    border-color var(--transition),
    box-shadow var(--transition),
    transform var(--transition);
  border: 1px solid transparent;
}

/* Sleek underline indicator (no height cost) */
.top-nav a::after {
  content: "";
  position: absolute;
  inset-inline: .4rem;
  inset-block-end: -.2rem;
  height: 2px;
  border-radius: 2px;
  background: color-mix(in srgb, var(--color-accent) 70%, transparent 30%);
  transform: scaleX(0);
  transform-origin: center;
  transition: transform var(--transition);
}

/* Hover & focus — soft tint + underline appears */
.top-nav a:hover,
.top-nav a:focus-visible {
  background: color-mix(in srgb, var(--color-accent) 10%, var(--color-surface) 90%);
  border-color: color-mix(in srgb, var(--color-accent) 30%, var(--color-border) 70%);
  box-shadow: 0 4px 10px color-mix(in srgb, var(--color-accent) 30%, transparent 70%);
  outline: none;
}
.top-nav a:hover::after,
.top-nav a:focus-visible::after {
  transform: scaleX(1);
}

/* Active link — stronger underline, minimal fill */
.top-nav a.active,
.top-nav li.active a {
  color: color-mix(in srgb, white 85%, var(--color-text) 15%);
  background: color-mix(in srgb, var(--color-accent) 18%, transparent 82%);
  border-color: color-mix(in srgb, var(--color-accent) 45%, var(--color-border) 55%);
  box-shadow: 0 4px 12px color-mix(in srgb, var(--color-accent) 38%, transparent 62%);
}
.top-nav a.active::after,
.top-nav li.active a::after {
  background: color-mix(in srgb, var(--color-accent) 85%, white 15%);
  transform: scaleX(1);
}

/* Unauthorized links */
.unauthorized a {
  color: var(--color-muted);
  font-style: italic;
  cursor: not-allowed;
  pointer-events: none;
  opacity: .65;
}

/* Scrollbar styling */
.top-nav::-webkit-scrollbar { height: 6px; }
.top-nav::-webkit-scrollbar-thumb {
  background: color-mix(in srgb, var(--color-accent) 40%, transparent 60%);
  border-radius: 3px;
}
.top-nav::-webkit-scrollbar-track { background: transparent; }

/* Touch-friendly bump on very small screens */
@media (max-width: 600px) {
  .top-nav a { padding: .55rem .7rem; } /* keep hit-area comfy */
}
