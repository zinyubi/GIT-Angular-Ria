/* === Component host fills its parent ====================================== */
:host {
  display: flex;
  flex-direction: column;
  block-size: 100%;
  min-block-size: 0;
}

/* Header stays auto-height */
.planning-header {
  flex: 0 0 auto;
}

/* === Workspace grid: LEFT rail | MAP | RIGHT rail | INSPECTOR ============ */
.planning-workspace {
  flex: 1 1 auto;
  min-block-size: 0;
  display: grid;
  grid-template-columns:
    var(--rail-w, 300px)                /* left scenarios rail  */
    minmax(0, 1fr)                      /* map (dominant)       */
    56px                                /* right mini-rail      */
    minmax(360px, 430px);               /* inspector tools      */
  gap: 0;
}

/* When there is NO inspector (no scenario) â€“ still keep right rail */
.planning-workspace.no-inspector {
  grid-template-columns:
    var(--rail-w, 300px)
    minmax(0, 1fr)
    56px;
}

/* When inspector is collapsed but scenario exists */
.planning-workspace.inspector-collapsed:not(.no-inspector) {
  grid-template-columns:
    var(--rail-w, 300px)
    minmax(0, 1fr)
    56px
    0;                                  /* inspector shrinks to 0 */
}

/* Optional: keep inspector content from flashing at 0px width */
.planning-workspace.inspector-collapsed .inspector {
  opacity: 0;
  pointer-events: none;
}

/* Allow all direct children to shrink if needed */
.planning-workspace > * {
  min-block-size: 0;
  min-inline-size: 0;
}

/* === Left rail width depending on collapsed state ======================== */
.planning-workspace.is-collapsed {
  --rail-w: 56px;
}
.planning-workspace:not(.is-collapsed) {
  --rail-w: 320px;
}

/* === Map column =========================================================== */
.map-wrap {
  grid-column: 2;
  block-size: 100%;
  inline-size: 100%;
  display: block;
}

/* Ensure map panel & Luciad map fill available area */
app-map-panel,
app-map-panel ria-map,
app-map-panel ::ng-deep ria-map,
app-map-panel ::ng-deep .luciad-map,
app-map-panel ::ng-deep .map-root {
  height: 100%;
  width: 100%;
  display: block;
}

/* === RIGHT MINI RAIL ===================================================== */
.right-rail {
  grid-column: 3;
  block-size: 100%;
  width: 56px;
  background: color-mix(
    in srgb,
    var(--color-surface, #0f1216) 96%,
    black 4%
  );
  border-inline-start: 1px solid color-mix(
    in srgb,
    var(--color-surface, #0f1216) 82%,
    black 18%
  );
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-block: 6px;
  z-index: 20; /* ensures it sits above any map UI in that column */
}

.right-rail-btn {
  width: 40px;
  height: 40px;
  border-radius: 8px;
  border: 1px solid color-mix(
    in srgb,
    var(--color-surface, #10131a) 80%,
    black 20%
  );
  background: color-mix(
    in srgb,
    var(--color-surface, #10131a) 95%,
    black 5%
  );
  color: var(--color-text, #e7ecf6);
  cursor: pointer;

  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
}

.right-rail-btn:hover {
  background: color-mix(
    in srgb,
    var(--color-surface, #10131a) 90%,
    var(--color-accent, #ff4b8b) 10%
  );
}

.right-rail-btn span {
  font-size: 1.2rem;
  line-height: 1;
}

/* === Inspector column ===================================================== */
.inspector {
  grid-column: 4;
  block-size: 100%;
  min-block-size: 0;

  display: flex;
  flex-direction: column;
  background: color-mix(
    in srgb,
    var(--color-surface, #0f1216) 96%,
    black 4%
  );
  border-inline-start: 1px solid color-mix(
    in srgb,
    var(--color-surface, #0f1216) 82%,
    black 18%
  );
}

.inspector-inner {
  flex: 1 1 auto;
  min-block-size: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 10px;
  overflow: hidden;
}

/* Each card inside inspector (deployment, list, editor) */
.inspector-card {
  display: block;
  background: color-mix(
    in srgb,
    var(--color-surface, #10131a) 97%,
    black 3%
  );
  border-radius: 10px;
  border: 1px solid color-mix(
    in srgb,
    var(--color-surface, #10131a) 84%,
    black 16%
  );
  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.55);
}

/* Deployment form: auto height at the top */
app-deployment-form.inspector-card {
  flex: 0 0 auto;
}

/* Deployed list: fills remaining space under form, scrolls internally */
.inspector-card--list {
  flex: 1 1 auto;
  min-block-size: 0;
}

/* Aircraft editor: takes full height of inspector */
.inspector-editor {
  flex: 1 1 auto;
  min-block-size: 0;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* If editor component has its own scrolling, ensure it can grow */
.inspector-editor app-aircraft-editor {
  flex: 1 1 auto;
  min-block-size: 0;
}

/* === Responsive tweaks ==================================================== */
@media (max-width: 1200px) {
  .planning-workspace {
    grid-template-columns:
      var(--rail-w, 260px)
      minmax(0, 1fr)
      56px
      minmax(320px, 380px);
  }

  .planning-workspace.no-inspector {
    grid-template-columns:
      var(--rail-w, 260px)
      minmax(0, 1fr)
      56px;
  }

  .planning-workspace.inspector-collapsed:not(.no-inspector) {
    grid-template-columns:
      var(--rail-w, 260px)
      minmax(0, 1fr)
      56px
      0;
  }
}

@media (max-width: 900px) {
  .planning-workspace {
    grid-template-columns:
      var(--rail-w, 220px)
      minmax(0, 1fr)
      56px
      minmax(260px, 320px);
  }

  .planning-workspace.no-inspector {
    grid-template-columns:
      var(--rail-w, 220px)
      minmax(0, 1fr)
      56px;
  }

  .planning-workspace.inspector-collapsed:not(.no-inspector) {
    grid-template-columns:
      var(--rail-w, 220px)
      minmax(0, 1fr)
      56px
      0;
  }
}
