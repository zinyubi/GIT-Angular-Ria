import{WMSCapabilitiesParser}from"./WMSCapabilitiesParser.js";import{isDefined}from"../../util/Lang.js";import{XMLSchema}from"../../util/XMLSchema.js";import{getReference,isValidReferenceIdentifier}from"../../reference/ReferenceProvider.js";import{WMSCapabilitiesSchemaV111}from"./WMSCapabilitiesSchemaV111.js";import{WMSVersion}from"../../ogc/WMSVersion.js";const DEFAULT_REF=getReference("EPSG:4326");export class WMSCapabilitiesParserV111 extends WMSCapabilitiesParser{_referenceFieldName="SRS";_swapAxes=false;constructor(e){super(new XMLSchema(WMSCapabilitiesSchemaV111).parse(e),["WMT_MS_Capabilities","WMS_Capabilities"])}get version(){return WMSVersion.V111}_parseLayerScaleDenominator(e){if(!isDefined(e.ScaleHint))return null;return{min:e.ScaleHint.min,max:e.ScaleHint.max}}_hasWGS84Bounds(e){return isDefined(e.LatLonBoundingBox)}_parseWGS84Bounds(e){return this.parseBounds({SRS:"EPSG:4326",...e.LatLonBoundingBox})}_hasBoundsList(e){return isDefined(e.LatLonBoundingBox)||isDefined(e.BoundingBox)}_parseBoundsList(e){let i=[];const n=(e.BoundingBox||[]).filter((e=>isValidReferenceIdentifier(e.SRS)&&getReference(e.SRS).equals(DEFAULT_REF))).length>0;if(isDefined(e.LatLonBoundingBox)&&!n)i.push({SRS:"EPSG:4326",...e.LatLonBoundingBox});if(isDefined(e.BoundingBox))i=i.concat(e.BoundingBox);return i.map(this.parseBounds,this).filter((e=>isDefined(e)))}}