import{ShadowSettingsImpl}from"./ShadowSettings.js";import{isDefined,isNumber}from"../util/Lang.js";import{canCreatePhotonColorFromString}from"../util/Color.js";class LightImpl{constructor(t){this.setToLiteral(t)}setToLiteral(t){if(!isDefined(t))return;if(isDefined(t.ambientColor))this.ambientColor=t.ambientColor;else this.ambientColor="rgb(64,64,64)";if(isDefined(t.diffuseColor))this.diffuseColor=t.diffuseColor;else this.diffuseColor="rgb(255,255,255)";this.shadows=t.shadows??null;if(isDefined(t.pitch,true))this.pitch=t.pitch;else this.pitch=-45;this.direction=t.direction??{x:0,y:0,z:1};this.time=t.time??new Date}get ambientColor(){return this._ambientColor}set ambientColor(t){if(canCreatePhotonColorFromString(t))this._ambientColor=t;else throw new Error(`Invalid ambient color: ${t}`)}get diffuseColor(){return this._diffuseColor}set diffuseColor(t){if(canCreatePhotonColorFromString(t))this._diffuseColor=t;else throw new Error(`Invalid diffuse color: ${t}`)}get shadows(){return this._shadows}set shadows(t){this._shadows=t?new ShadowSettingsImpl(t):null}get pitch(){return this._pitch}set pitch(t){if(isNumber(t,false))if(t>=-90&&t<=90)this._pitch=t;else throw new Error(`Invalid pitch: ${t}`);else this._pitch=null}get direction(){return this._direction}set direction(t){this._direction=t}get time(){return this._time}set time(t){this._time=t}}export function createHeadLight(t){t=t||{};const{ambientColor:i,diffuseColor:e,pitch:o}=new LightImpl(t);const r=0;return{visitLight:function(t){t.useHeadLight(i,e,r,o)},toString:function(){return`HeadLight{ambientColor: ${i}, diffuseColor:${e}, yawOffset: ${r}, pitch: ${o}}`}}}export function createDirectionalLight(t){t=t||{};const{ambientColor:i,diffuseColor:e,direction:o,shadows:r}=new LightImpl(t);return{visitLight:function(t){const s=r??new ShadowSettingsImpl({});t.useDirectionalLight(i,e,o,!!r,s)},toString:function(){return`DirectionalLight{ambientColor: ${i}, diffuseColor:${e}, direction: ${o}, shadows: ${r}}`}}}export function createSunLight(t){t=t||{};const{ambientColor:i,diffuseColor:e,time:o,shadows:r}=new LightImpl(t);return{visitLight:function(t){const s=r??new ShadowSettingsImpl({});t.useTimeLight(i,e,o,!!r,s)},toString:function(){return`TimeLight{ambientColor: ${i}, diffuseColor:${e}, time: ${o}, shadows: ${r}}`}}}