import*as ArcPathUtil from"./ArcPathUtil.js";import{ProgrammingError}from"../../../error/ProgrammingError.js";import{NotImplementedError}from"../../../error/NotImplementedError.js";import{ellipticalDistance2D}from"../../../util/Cartesian.js";import{simplePointCreate,simplePointMove3DToCoordinates}from"../../../shape/SimplePoint.js";export class RhumbArcPath{constructor(){this._center=simplePointCreate(0,0,0);this._A=0;this._B=0;this._ratio=0;this._rotAngle=0;this._startAzimuth=0;this._arcAngle=0;this._ellipsoid=null;this._shouldReparameterize=false}getPointAtSFCT(t,i){if(null===this._ellipsoid)throw new ProgrammingError("RhumbArcPAth:: Not correctly initialized, no ellipsoid.");if(this._shouldReparameterize)t=ArcPathUtil.reparameterizeForEllipse(t,this._ratio);const r=this._startAzimuth+t*this._arcAngle;const e=ellipticalDistance2D(this._A,this._B,r-this._rotAngle);this._ellipsoid.rhumblinePositionSFCT(this._center,e,r,i);return i}getMinimumRecursionDepth(){return 0}initializeArc(t,i,r,e,s,o,h){simplePointMove3DToCoordinates(this._center,t.x,t.y,t.z);this._A=i;this._B=r;this._rotAngle=e;this._startAzimuth=s;this._arcAngle=o;if(Math.abs(this._B)>ArcPathUtil.EPSILON){this._ratio=Math.abs(this._A/this._B);this._shouldReparameterize=ArcPathUtil.shouldReparameterizeForEllipse(90-this._startAzimuth+this._rotAngle,this._arcAngle,this._ratio)}else{this._ratio=1;this._shouldReparameterize=false}this._ellipsoid=h.geodeticDatum.ellipsoid}getEndPosition(){throw new NotImplementedError}getStartPosition(){throw new NotImplementedError}}