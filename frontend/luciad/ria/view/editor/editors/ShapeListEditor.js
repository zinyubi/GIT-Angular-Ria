import{ComposedShapeEditor}from"./ComposedShapeEditor.js";import{ShapeType}from"../../../shape/ShapeType.js";import{EditContext}from"../../controller/EditContext.js";import{isConstrainedPolygon}from"../../../shape/ConstrainedPolygon.js";import{isConstrainedPolyline}from"../../../shape/ConstrainedPolyline.js";import{ConstrainedPointListForCreation}from"../../../shape/ConstrainedPointListForCreation.js";import{mergeMinMaxPointCount}from"../../controller/EditSettings.js";import{CascadingEditHandle}from"../handles/CascadingEditHandle.js";export class ShapeListEditor extends ComposedShapeEditor{constructor(e){super(ShapeType.SHAPE_LIST,e)}getSubShapeCount(e){return e.shapeCount}getSubShape(e,t){return e.getShape(t)}getCreateHandle(e){const t=[];const o=e.shape;let n=e.settings;for(let i=0;i<this.getSubShapeCount(o);i++){let a=this.getSubShape(o,i);const r=new EditContext(e.map,e.layer,e.feature,a,n);if(a.type===ShapeType.POINT)t.unshift(this.delegate.getCreateHandle(r));else{if(isConstrainedPolygon(a)||isConstrainedPolyline(a)){n={...mergeMinMaxPointCount(n,a),freehand:n.freehand};if(a.type===ShapeType.POLYLINE)a=ConstrainedPointListForCreation.createPolyline(a,0);else if(a.type===ShapeType.POLYGON)a=ConstrainedPointListForCreation.createPolygon(a,0)}const o=new EditContext(e.map,e.layer,e.feature,a,n);t.push(this.delegate.getCreateHandle(o))}}return new CascadingEditHandle(t)}}