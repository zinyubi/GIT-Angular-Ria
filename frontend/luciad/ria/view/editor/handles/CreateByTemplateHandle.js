import{CompositeEditHandle}from"./CompositeEditHandle.js";import{PointCreateHandle}from"./PointCreateHandle.js";import{Constants}from"../../../util/Constants.js";import{ReferenceType}from"../../../reference/ReferenceType.js";import{getUnitOfMeasure}from"../../../uom/UnitOfMeasureRegistry.js";import{GeoReference}from"../../../reference/GeoReference.js";import{Axis}from"../../../reference/Axis.js";import{createPoint}from"../../../shape/ShapeFactory.js";import{CascadingEditHandle}from"./CascadingEditHandle.js";import{createEllipsoidalGeodesy}from"../../../geodesy/GeodesyFactory.js";export class CreateByTemplateHandle extends CascadingEditHandle{constructor(e,t,n){const r=createPoint(e.shape.reference,[0,0]);const o=undefined;const s=undefined;super([new PointCreateHandle(r,(t=>{n(e,t)})),new CompositeEditHandle(t)])}}export function getDefaultSize(e){let t=1;if(e.is3D())t=1/e.mapScale[0]/30;else if(e.reference.referenceType===ReferenceType.CARTESIAN)t=e.mapBounds.width/10;else{const n=e.reference.getAxis(Axis.Name.X).unitOfMeasure;const r=getUnitOfMeasure("Meter");t=n.convertToUnit(e.mapBounds.width/10,r)}return t<2e6?t:2e6}export function getDefaultPoint(e,t,n,r=getDefaultSize(e)){if(null===t.reference)throw new Error("Point reference cannot be null. Transform the point to a model reference first.");let o;if(t.reference instanceof GeoReference){const e=undefined;o=createEllipsoidalGeodesy(t.reference).interpolate(t,r,n)}else{o=t.copy();o.translate2D(r*Math.sin(n*Constants.DEG2RAD),r*Math.cos(n*Constants.DEG2RAD))}return o}