import{inflate as pako}from"../../util/pako/inflate.js";const geeTerrainHeaderLittleEnd=1953029805;const geeTerrainHeaderBigEndian=2917034100;const defaultOriginalKeyholeKey=new DataView(intoUint8Array([69,244,189,11,121,226,106,69,34,5,146,44,23,205,6,113,248,73,16,70,103,81,0,66,37,198,232,97,44,102,41,8,198,52,220,106,98,37,121,10,119,29,109,105,214,240,156,107,147,161,189,78,117,224,65,4,91,223,64,86,12,217,187,114,155,129,124,16,51,83,238,79,108,212,113,5,176,123,192,127,69,3,86,90,173,119,85,101,11,51,146,42,172,25,108,53,20,197,29,48,115,248,51,62,109,70,56,74,180,221,240,46,221,23,117,22,218,140,68,116,34,6,250,97,34,12,51,34,83,111,175,57,68,11,140,14,57,217,57,19,76,185,191,127,171,92,140,80,95,159,34,117,120,31,233,7,113,145,104,59,193,196,155,127,240,60,86,113,72,130,5,39,85,102,89,78,101,29,152,117,163,97,70,125,97,63,21,65,0,159,20,6,215,180,52,77,206,19,135,70,176,26,213,5,28,184,138,39,123,139,220,43,187,77,103,48,200,209,246,92,143,80,250,91,47,70,155,110,53,24,47,39,67,46,235,10,12,94,16,5,16,165,115,27,101,52,229,108,46,106,67,39,99,20,35,85,169,63,113,123,103,67,125,58,175,205,226,84,85,156,253,75,198,226,159,47,40,237,203,92,198,45,102,7,136,167,59,47,24,42,34,78,14,176,107,46,221,13,149,125,125,71,186,67,178,17,178,43,62,77,170,62,125,230,206,73,137,198,230,120,12,97,49,5,45,1,164,79,165,126,113,32,136,236,13,49,232,78,11,0,110,80,104,125,23,61,8,13,23,149,166,110,163,104,151,36,91,107,243,23,35,243,182,115,179,13,11,64,192,159,216,4,81,93,250,26,23,34,46,21,106,223,73,0,185,160,119,85,198,239,16,106,191,123,71,76,127,131,23,5,238,220,220,70,133,169,173,83,7,43,83,52,6,7,255,20,148,89,25,2,228,56,232,49,131,78,185,88,70,107,203,45,35,134,146,112,0,53,136,34,207,49,178,38,47,231,195,117,45,54,44,114,116,176,35,71,183,211,209,38,22,133,55,114,226,0,140,68,207,16,218,51,45,26,222,96,134,105,35,105,42,124,205,75,81,13,149,84,57,119,46,41,234,27,166,80,162,106,143,111,80,153,92,62,84,251,239,80,91,11,7,69,23,137,109,40,19,119,55,29,219,142,30,74,5,102,74,111,153,32,229,112,226,185,113,126,12,109,73,4,45,122,254,114,199,242,89,48,143,187,2,93,115,229,201,32,234,120,236,32,144,240,138,127,66,23,124,71,25,96,176,22,189,38,183,113,182,199,159,14,209,51,130,61,211,171,238,99,153,200,43,83,160,68,92,113,1,198,204,68,31,50,79,60,202,192,41,61,82,211,97,25,88,169,125,101,180,220,207,13,244,61,241,8,169,66,218,35,9,216,191,94,80,73,248,77,192,203,71,76,28,79,247,123,43,216,22,24,197,49,146,59,181,111,220,108,13,146,136,22,209,158,219,63,226,233,218,95,212,132,226,70,97,90,222,28,85,207,164,0,190,253,206,103,241,74,105,28,151,230,32,72,216,93,127,126,174,113,32,14,78,174,192,86,169,145,1,60,130,29,15,114,231,118,236,41,73,214,93,45,131,227,219,54,6,169,59,102,19,151,135,106,213,182,61,80,94,82,185,75,199,115,87,120,201,244,46,89,7,149,147,111,208,75,23,87,25,62,39,39,199,96,219,59,237,154,14,83,68,22,62,63,141,146,109,119,162,10,235,63,82,168,198,85,94,49,73,55,133,244,197,31,38,45,169,28,191,139,39,84,218,195,106,32,229,42,120,4,176,214,144,112,114,170,139,104,189,136,247,2,95,72,177,126,192,88,76,63,102,26,249,62,225,101,192,112,167,207,56,105,175,240,86,108,100,73,156,39,173,120,116,79,194,135,222,86,57,0,218,119,11,203,45,27,137,251,53,79,2,245,8,81,19,96,193,10,90,71,77,38,28,51,48,120,218,192,156,70,71,226,91,121,96,73,110,55,103,83,10,62,233,236,70,57,178,241,52,13,198,132,83,117,110,225,12,89,217,30,222,41,133,16,123,73,73,165,119,121,190,73,86,46,54,231,11,58,187,79,3,98,123,210,77,49,149,47,189,56,123,168,79,33,225,236,70,112,118,149,125,41,34,120,136,10,144,221,157,92,218,222,25,81,207,240,252,89,82,101,124,51,19,223,243,72,218,187,42,117,219,96,178,2,21,212,252,25,237,27,236,127,53,168,255,40,49,7,45,18,200,220,136,70,124,138,91,34]).buffer);function intoUint8Array(e){const t=new Uint8Array(new ArrayBuffer(e.length));t.set(e);return t}export function decode(e,t=defaultOriginalKeyholeKey){if(!ArrayBuffer.isView(t))throw new Error("Given encryption key must be a proper data view");decrypt(new DataView(e),t);try{return pako.inflate(new Uint8Array(e,2*Uint32Array.BYTES_PER_ELEMENT)).buffer}catch(t){return e}}function decrypt(e,t){const n=e.getUint32(0,true);if(n===geeTerrainHeaderLittleEnd||n===geeTerrainHeaderBigEndian)return e;const r=e.byteLength;const i=t.byteLength;let a=0;let o=0;let u=8;while(r-a>=8){u=(u+8)%24;o=u;while(r-a>=8&&o<i){e.setUint32(a,e.getUint32(a,true)^t.getUint32(o,true),true);e.setUint32(a+4,e.getUint32(a+4,true)^t.getUint32(o+4,true),true);a+=8;o+=24}}if(a<r){if(o>=i){u=(u+8)%24;o=u}while(a<r){e.setUint8(a,e.getUint8(a)^t.getUint8(o));a++;o++}}return e}