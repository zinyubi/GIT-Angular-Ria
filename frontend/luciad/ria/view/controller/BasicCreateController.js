import{ProgrammingError}from"../../error/ProgrammingError.js";import{Feature}from"../../model/feature/Feature.js";import{createShape}from"../../shape/ShapeFactory.js";import{ShapeType}from"../../shape/ShapeType.js";import{isDefined}from"../../util/Lang.js";import{CreateController}from"./CreateController.js";export class BasicCreateController extends CreateController{constructor(e,r,t){super(t);this._shapeType=e;this._propertiesTemplate=r?Object.assign({},r):{};const o=undefined;if(ShapeType.contains(ShapeType.COMPLEX_POLYGON,e)||ShapeType.contains(ShapeType.SHAPE_LIST,e)||ShapeType.contains(ShapeType.EXTRUDED_SHAPE,e))throw new ProgrammingError("BasicCreateController does not support creation of complex polygons, shape lists or extruded shapes.");if(ShapeType.contains(ShapeType.POLYGON,e))this.setPointCount(3,-1);if(ShapeType.contains(ShapeType.POLYLINE,e))this.setPointCount(2,-1)}onCreateNewObject(e,r){return new Feature(createShape(this._shapeType,r.model.reference),Object.assign({},this._propertiesTemplate))}onObjectCreated(e,r,t){if(!isDefined(t.shape.bounds))return;return super.onObjectCreated(e,r,t)}}