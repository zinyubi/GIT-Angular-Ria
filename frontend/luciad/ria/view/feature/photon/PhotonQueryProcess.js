function PhotonQueryProcess(e,t,r){this._layer=e;this._workingSet=t;this._painterProcess=r;var o=this;this._workingSet.forEachVisibleFeature((function(e){o._processWorkingSetChangedEvent("add",e)}));this._workingSetListener=this._workingSet.on("WorkingSetChanged",this._processWorkingSetChangedEvent.bind(this))}PhotonQueryProcess.prototype=Object.create(Object.prototype);PhotonQueryProcess.prototype.constructor=PhotonQueryProcess;PhotonQueryProcess.prototype.isReady=function(){return true};PhotonQueryProcess.prototype.release=function(){if(this._workingSetListener){this._workingSetListener.remove();this._workingSetListener=null}this._painterProcess.clear()};PhotonQueryProcess.prototype._processWorkingSetChangedEvent=function(e,t){if("update"===e||"add"===e){var r;if(this._layer.fetchProvidedShape(t))this._painterProcess[e](t);else this._painterProcess.remove(t)}else if("remove"===e)this._painterProcess.remove(t);else if("clear"===e)this._painterProcess.clear()};export{PhotonQueryProcess};