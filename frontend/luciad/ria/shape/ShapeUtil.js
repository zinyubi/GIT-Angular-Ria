import{Log}from"../util/Log.js";import{getData as getLicenseData}from"../util/License.js";import{ShapeUtilInternal}from"./ShapeUtilInternal.js";export const ShapeUtil={...ShapeUtilInternal};var decrypt=function(){var r=function(r){var t=W.call(r);return{m:r,mp:t,mpl:32767&t,mph:t>>15,um:(1<<C-15)-1,mt2:2*r.t}};var t=function(r,t){var a;for(a=this.t-1;a>=0;--a)t[a+r]=this[a];for(a=r-1;a>=0;--a)t[a]=0;t.t=this.t+r;t.s=this.s};var a=function(r,t){var a=r%C;var e=C-a;var i=(1<<e)-1;var n=Math.floor(r/C),l=this.s<<a&x,v;for(v=this.t-1;v>=0;--v){t[v+n+1]=this[v]>>e|l;l=(this[v]&i)<<a}for(v=n-1;v>=0;--v)t[v]=0;t[n]=l;t.t=this.t+n+1;t.s=this.s;U.call(t)};var e=function(r,t){for(var a=r;a<this.t;++a)t[a-r]=this[a];t.t=Math.max(this.t-r,0);t.s=this.s};var i=function(r,t){t.s=this.s;var a=Math.floor(r/C);if(a>=this.t){t.t=0;return}var e=r%C;var i=C-e;var n=(1<<e)-1;t[0]=this[a]>>e;for(var l=a+1;l<this.t;++l){t[l-a-1]|=(this[l]&n)<<i;t[l-a]=this[l]>>e}if(e>0)t[this.t-a-1]|=(this.s&n)<<i;t.t=this.t-a;U.call(t)};var n=function(r,n,l){var v=V.call(r);if(v.t<=0)return;var f=V.call(this);if(f.t<v.t){if(null!=n)G(0);if(null!=l)Y.call(this,l);return}if(null==l)l=G(0);var c=G(0),s=this.s,h=r.s;var o=C-I(v[v.t-1]);if(o>0){a.call(v,o,c);a.call(f,o,l)}else{Y.call(v,c);Y.call(f,l)}var u=c.t;var p=c[u-1];if(0==p)return;var g=p*(1<<j)+(u>1?c[u-2]>>E:0);var d=M/g,b=(1<<j)/g,y=1<<E;var m=l.t,w=m-u,q=null==n?G(0):n;t.call(c,w,q);if(O.call(l,q)>=0){l[l.t++]=1;F.call(l,q,l)}t.call(Q,u,q);F.call(q,c,c);while(c.t<u)c[c.t++]=0;while(--w>=0){var k=l[--m]==p?x:Math.floor(l[m]*d+(l[m-1]+y)*b);if((l[m]+=S.call(c,0,k,l,w,0,u))<k){t.call(c,w,q);F.call(l,q,l);while(l[m]<--k)F.call(l,q,l)}}if(null!=n){e.call(l,u,n);if(s!=h)F.call(P,n,n)}l.t=u;U.call(l);if(o>0)i.call(l,o,l);if(s<0)F.call(P,l,l)};var l=function(r){var a=G(0);t.call(V.call(r),this.m.t,a);n.call(a,this.m,null,a);if(r.s<0&&O.call(a,P)>0)F.call(this.m,a,a);return a};var v=function(r){var t=G(0);Y.call(r,t);f.call(this,t);return t};var f=function(r){while(r.t<=this.mt2)r[r.t++]=0;for(var t=0;t<this.m.t;++t){var a=32767&r[t];var i=a*this.mpl+((a*this.mph+(r[t]>>15)*this.mpl&this.um)<<15)&x;r[a=t+this.m.t]+=S.call(this.m,0,i,r,t,0,this.m.t);while(r[a]>=L){r[a]-=L;r[++a]++}}U.call(r);e.call(r,this.m.t,r);if(O.call(r,this.m)>=0)F.call(r,this.m,r)};var c=function(r,t){T.call(r,t);f.call(this,t)};var s=function(r,t,a){D.call(r,t,a);f.call(this,a)};var h=52;var o="0123456789abcdefghijklmnopqrstuvwxyz";var u=[];var p,g;p="0".charCodeAt(0);for(g=0;g<=9;++g)u[p++]=g;p="a".charCodeAt(0);for(g=10;g<36;++g)u[p++]=g;p="A".charCodeAt(0);for(g=10;g<36;++g)u[p++]=g;var d=function(r){return o.charAt(r)};var b=function(r,t){var a=u[r.charCodeAt(t)];return null==a?-1:a};var y;var m;var w=15715070==(16777215&0xdeadbeefcafe);var q=function(r,t,a,e,i,n){while(--n>=0){var l=t*this[r++]+a[e]+i;i=Math.floor(l/67108864);a[e++]=67108863&l}return i};var k=function(r,t,a,e,i,n){var l=32767&t,v=t>>15;while(--n>=0){var f=32767&this[r];var c=this[r++]>>15;var s=v*f+c*l;i=((f=l*f+((32767&s)<<15)+a[e]+(1073741823&i))>>>30)+(s>>>15)+v*c+(i>>>30);a[e++]=1073741823&f}return i};var A=function(r,t,a,e,i,n){var l=16383&t,v=t>>14;while(--n>=0){var f=16383&this[r];var c=this[r++]>>14;var s=v*f+c*l;i=((f=l*f+((16383&s)<<14)+a[e]+i)>>28)+(s>>14)+v*c;a[e++]=268435455&f}return i};var S;if(w&&"object"===typeof navigator&&"Microsoft Internet Explorer"==navigator.appName){S=k;y=30}else if(w&&"object"===typeof navigator&&"Netscape"!=navigator.appName){S=q;y=26}else{S=A;y=28}var C=y;var x=(1<<y)-1;var L=1<<y;var M=Math.pow(2,h);var j=h-y;var E=2*y-h;var I=function(r){var t=1,a;if(a=r>>>16){r=a;t+=16}if(a=r>>8){r=a;t+=8}if(a=r>>4){r=a;t+=4}if(a=r>>2){r=a;t+=2}if(a=r>>1){r=a;t+=1}return t};var z=function(){if(this.t<=0)return 0;return C*(this.t-1)+I(this[this.t-1]^this.s&x)};var U=function(){var r=this.s&x;while(this.t>0&&this[this.t-1]==r)--this.t};var F=function(r,t){var a=0,e=0,i=Math.min(r.t,this.t);while(a<i){e+=this[a]-r[a];t[a++]=e&x;e>>=C}if(r.t<this.t){e-=r.s;while(a<this.t){e+=this[a];t[a++]=e&x;e>>=C}e+=this.s}else{e+=this.s;while(a<r.t){e-=r[a];t[a++]=e&x;e>>=C}e-=r.s}t.s=e<0?-1:0;if(e<-1)t[a++]=L+e;else if(e>0)t[a++]=e;t.t=a;U.call(t)};var N=function(){var r=G(0);F.call(G.ZERO,this,r);return r};var Y=function(r){for(var t=this.t-1;t>=0;--t)r[t]=this[t];r.t=this.t;r.s=this.s};var V=function(){return this.s<0?N.call(this):this};var T=function(r){var t=V.call(this);var a=r.t=2*t.t;while(--a>=0)r[a]=0;for(a=0;a<t.t-1;++a){var e=S.call(t,a,t[a],r,2*a,0,1);if((r[a+t.t]+=S.call(t,a+1,2*t[a],r,2*a+1,e,t.t-a-1))>=L){r[a+t.t]-=L;r[a+t.t+1]=1}}if(r.t>0)r[r.t-1]+=S.call(t,a,t[a],r,2*a,0,1);r.s=0;U.call(r)};var D=function(r,t){var a=V.call(this),e=V.call(r);var i=a.t;t.t=i+e.t;while(--i>=0)t[i]=0;for(i=0;i<e.t;++i)t[i+a.t]=S.call(a,0,e[i],t,i,0,a.t);t.s=0;U.call(t);if(this.s!=r.s)F.call(P,t,t)};var O=function(r){var t=this.s-r.s;if(t)return t;var a=this.t;if(t=a-r.t)return t;while(--a>=0)if(t=this[a]-r[a])return t;return 0};var W=function(){if(this.t<1)return 0;var r=this[0];if(0==(1&r))return 0;var t=3&r;return(t=(t=(t=(t=t*(2-(15&r)*t)&15)*(2-(255&r)*t)&255)*(2-((65535&r)*t&65535))&65535)*(2-r*t%L)%L)>0?L-t:-t};var Z=function(t,a){var e=z.call(t),i,n=G(1),f;i=5;f=new r(a);var h=[],o=3,u=i-1,p=(1<<i)-1;h[1]=l.call(f,this);if(i>1){var g=G(0);c.call(f,h[1],g);while(o<=p){h[o]=G(0);s.call(f,g,h[o-2],h[o]);o+=2}}var d=t.t-1,b,y=true,m=G(0),w;e=I(t[d])-1;while(d>=0){if(e>=u)b=t[d]>>e-u&p;else{b=(t[d]&(1<<e+1)-1)<<u-e;if(d>0)b|=t[d-1]>>C+e-u}o=i;while(0==(1&b)){b>>=1;--o}if((e-=o)<0){e+=C;--d}if(y){Y.call(h[b],n);y=false}else{while(o>1){c.call(f,n,m);c.call(f,m,n);o-=2}if(o>0)c.call(f,n,m);else{w=n;n=m;m=w}s.call(f,m,h[b],n)}while(d>=0&&0==(t[d]&1<<e)){c.call(f,n,m);w=n;n=m;m=w;if(--e<0){e=C-1;--d}}}return v.call(f,n)};var R=function(r){if(this.s<0)return"-"+N.call(this).toString(r);var t;var a=(1<<(t=4))-1,e,i=false,n="",l=this.t;var v=C-l*C%t;if(l-- >0){if(v<C&&(e=this[l]>>v)>0){i=true;n=d(e)}while(l>=0){if(v<t){e=(this[l]&(1<<v)-1)<<t-v;e|=this[--l]>>(v+=C-t)}else{e=this[l]>>(v-=t)&a;if(v<=0){v+=C;--l}}if(e>0)i=true;if(i)n+=d(e)}}return i?n:"0"};var G=function(r){var t=new Object;if("number"==typeof r){t.t=1;t.s=r<0?-1:0;if(r>0)t[0]=r;else if(r<-1)t[0]=r+L;else t.t=0}else{var a=4;t.t=0;t.s=0;var e=r.length,i=false,n=0;while(--e>=0){var l=b(r,e);if(l<0){if("-"==r.charAt(e))i=true;continue}i=false;if(0==n)t[t.t++]=l;else if(n+a>C){t[t.t-1]|=(l&(1<<C-n)-1)<<n;t[t.t++]=l>>C-n}else t[t.t-1]|=l<<n;if((n+=a)>=C)n-=C}U.call(t);if(i)F.call(P,t,t)}t.toString=R;return t};var P=G(0);var Q=G(1);return function(r,t,a){return Z.call(G(r),G(t),G(a)).toString()}}();var hash=function(){var r=8;var t=(1<<r)-1;var a=function(r,t){var a=(65535&r)+(65535&t);var e;return(r>>16)+(t>>16)+(a>>16)<<16|65535&a};var e=function(a){var e=[];for(var i=0,n=a.length*r;i<n;i+=r)e[i>>5]|=(a.charCodeAt(i/r)&t)<<i%32;return e};var i=function(r){var t;return(new TextEncoder).encode(r)};var n=function(t){var a=[];for(var e=0,i=t.length*r;e<i;e+=r)a[e>>5]|=t[e/r]<<e%32;return a};var l=function(r,t){return r<<t|r>>>32-t};var v=function(r,t,e,i,n,v){return a(l(a(a(t,r),a(i,v)),n),e)};var f=function(r,t,a,e,i,n,l){return v(t&a|~t&e,r,t,i,n,l)};var c=function(r,t,a,e,i,n,l){return v(t&e|a&~e,r,t,i,n,l)};var s=function(r,t,a,e,i,n,l){return v(t^a^e,r,t,i,n,l)};var h=function(r,t,a,e,i,n,l){return v(a^(t|~e),r,t,i,n,l)};var o=function(r,t){r[t>>5]|=128<<t%32;r[(t+64>>>9<<4)+14]=t;var e=1732584193;var i=-271733879;var n=-1732584194;var l=271733878;for(var v=0;v<r.length;v+=16){var o=e;var u=i;var p=n;var g=l;e=f(e,i,n,l,r[v+0],7,-680876936);l=f(l,e,i,n,r[v+1],12,-389564586);n=f(n,l,e,i,r[v+2],17,606105819);i=f(i,n,l,e,r[v+3],22,-1044525330);e=f(e,i,n,l,r[v+4],7,-176418897);l=f(l,e,i,n,r[v+5],12,1200080426);n=f(n,l,e,i,r[v+6],17,-1473231341);i=f(i,n,l,e,r[v+7],22,-45705983);e=f(e,i,n,l,r[v+8],7,1770035416);l=f(l,e,i,n,r[v+9],12,-1958414417);n=f(n,l,e,i,r[v+10],17,-42063);i=f(i,n,l,e,r[v+11],22,-1990404162);e=f(e,i,n,l,r[v+12],7,1804603682);l=f(l,e,i,n,r[v+13],12,-40341101);n=f(n,l,e,i,r[v+14],17,-1502002290);i=f(i,n,l,e,r[v+15],22,1236535329);e=c(e,i,n,l,r[v+1],5,-165796510);l=c(l,e,i,n,r[v+6],9,-1069501632);n=c(n,l,e,i,r[v+11],14,643717713);i=c(i,n,l,e,r[v+0],20,-373897302);e=c(e,i,n,l,r[v+5],5,-701558691);l=c(l,e,i,n,r[v+10],9,38016083);n=c(n,l,e,i,r[v+15],14,-660478335);i=c(i,n,l,e,r[v+4],20,-405537848);e=c(e,i,n,l,r[v+9],5,568446438);l=c(l,e,i,n,r[v+14],9,-1019803690);n=c(n,l,e,i,r[v+3],14,-187363961);i=c(i,n,l,e,r[v+8],20,1163531501);e=c(e,i,n,l,r[v+13],5,-1444681467);l=c(l,e,i,n,r[v+2],9,-51403784);n=c(n,l,e,i,r[v+7],14,1735328473);i=c(i,n,l,e,r[v+12],20,-1926607734);e=s(e,i,n,l,r[v+5],4,-378558);l=s(l,e,i,n,r[v+8],11,-2022574463);n=s(n,l,e,i,r[v+11],16,1839030562);i=s(i,n,l,e,r[v+14],23,-35309556);e=s(e,i,n,l,r[v+1],4,-1530992060);l=s(l,e,i,n,r[v+4],11,1272893353);n=s(n,l,e,i,r[v+7],16,-155497632);i=s(i,n,l,e,r[v+10],23,-1094730640);e=s(e,i,n,l,r[v+13],4,681279174);l=s(l,e,i,n,r[v+0],11,-358537222);n=s(n,l,e,i,r[v+3],16,-722521979);i=s(i,n,l,e,r[v+6],23,76029189);e=s(e,i,n,l,r[v+9],4,-640364487);l=s(l,e,i,n,r[v+12],11,-421815835);n=s(n,l,e,i,r[v+15],16,530742520);i=s(i,n,l,e,r[v+2],23,-995338651);e=h(e,i,n,l,r[v+0],6,-198630844);l=h(l,e,i,n,r[v+7],10,1126891415);n=h(n,l,e,i,r[v+14],15,-1416354905);i=h(i,n,l,e,r[v+5],21,-57434055);e=h(e,i,n,l,r[v+12],6,1700485571);l=h(l,e,i,n,r[v+3],10,-1894986606);n=h(n,l,e,i,r[v+10],15,-1051523);i=h(i,n,l,e,r[v+1],21,-2054922799);e=h(e,i,n,l,r[v+8],6,1873313359);l=h(l,e,i,n,r[v+15],10,-30611744);n=h(n,l,e,i,r[v+6],15,-1560198380);i=h(i,n,l,e,r[v+13],21,1309151649);e=h(e,i,n,l,r[v+4],6,-145523070);l=h(l,e,i,n,r[v+11],10,-1120210379);n=h(n,l,e,i,r[v+2],15,718787259);i=h(i,n,l,e,r[v+9],21,-343485551);e=a(e,o);i=a(i,u);n=a(n,p);l=a(l,g)}return[e,i,n,l]};var u=function(r){var t="0123456789abcdef";var a=[];for(var e=0,i=4*r.length;e<i;e++)a.push(t.charAt(r[e>>2]>>e%4*8+4&15)+t.charAt(r[e>>2]>>e%4*8&15));return a.join("").replace(/^0+/,"")};return function(t,a){var l;var v;var f;if((a||{}).useUTF8Encoding||false){var c=i(t);var s=n(c);f=o(s,c.length*r)}else f=o(e(t),t.length*r);var h=[f[0]^f[2],f[1]^f[3]];return u(h)}}();ShapeUtil.unfu=hash;var obfuscateString=function(r){return r};var rot13=function(r){return r.replace(/[a-zA-Z]/g,(function(r){return String.fromCharCode((r<="Z"?90:122)>=(r=r.charCodeAt(0)+13)?r:r-26)}))};var annoy=function(r,t,a){var e=function(){if(false===a)Log.warn(r);else{Log.error(r);if(t){Log.error(rot13("Yvprafr grkg:"));Log.error(t);alert(r+"\n"+rot13("Ybbx ng gur pbafbyr bs lbhe oebjfre'f qrirybcre gbbyf sbe zber vasbezngvba."))}else alert(r)}};setTimeout((function(){e();if(false!==a)setInterval(e,3e5)}),0)};var moduleCheckFunction;var requestedModules=[];var checkLicense=function(r){var t=parse(r);var a=rot13("5npnpn00");var e=t[rot13("cebqhpgAnzr")];var i=t[rot13("irefvba")];var n=t[rot13("pbclevtug")];var l=t[rot13("zrffntr")];var v=t[rot13("yvprafrr")];var f=t[rot13("yvprafrGlcr")];var c=t[rot13("rkcvelQngr")];var s=t[rot13("frevnyAhzore")];var h=t[rot13("bcgvbanyZbqhyrf")];var o=h?h.split(/[ ,]+/):new Array;(moduleCheckFunction=function(){var t,a,e,i,n;while(requestedModules.length>0){var l=requestedModules.pop();e=l.module;n=l.callbacks;if(l.checked)return l.valid;else{for(t=0;t<o.length;t++)if((a=o[t])==e)i=true;if(!i)annoy(rot13("Lbhe YhpvnqEVN yvprafr vf abg inyvq sbe guvf pbzcbarag: ")+e,r);l.callbacks=[];l.checked=true;l.valid=i;for(const r of n)r&&r(l.valid);i=false}}})();var u=function(t){annoy(t,r,true)};var p=t[rot13("xrl")];if(!(i&&e&&n&&l&&v&&f&&s))u(rot13("Vapbzcyrgr YhpvnqEVN yvprafr svyr."));if(""!==a&&a!==s)u(rot13("Gur yvprafr svyr vf abg vagraqrq sbe guvf irefvba bs YhpvnqEVN. Frevny bs gur fbsgjner: ")+a+rot13(". Frevny va gur yvprafr svyr: ")+s);var g="";g+=i;g+=e;g+=n;g+=l;g+=v;g+=f;g+=h?h:"";g+=c?c:"";g+=s;var d=decrypt(p,obfuscateString("73e3d4d54c315dd465600a02e2777345e828c0400eb73b4c79ff3802dba4f0cbe6c46cedc2dcdc312a9382761991a11835240d65650863cc0bda7d2eb52634a1"),obfuscateString("a65704f66df903a49b65859ca159abe2a3ee5ffd9276df585e41e69470a01b312d37acb6e118930c8c457c8ae0f2f37e2718bea49f76a68e2fc7ead613ca2303"));var b;if(hash(g)!==d){var y;if(hash(g,{useUTF8Encoding:true})!==d)u(rot13("Vainyvq YhpvnqEVN yvprafr xrl (")+p+")")}if(c){var m=(new Date).getTime();var w=c.split("/");var q=new Date(w[0],w[1]-1,w[2]).getTime();if(q<m)u(rot13("YhpvnqEVN yvprafr rkcverq ba ")+c);else{var k=q-m;if(k<12096e5){var A=Math.floor(k/864e5);if(0===A)annoy(rot13("Lbhe yvprafr jvyy rkcver gbqnl."),r,false);else if(1===A)annoy(rot13("Lbhe yvprafr jvyy rkcver va bar qnl."),r,false);else annoy(rot13("Lbhe yvprafr jvyy rkcver va ")+A+rot13(" qnlf"),r,false)}}}};function parse(r){if(null==r)throw new ReferenceError("Unabled to parse properties - parameter was null");var t=[];var a={};var e;var i=-1;var n;var l=false;var v=String.fromCharCode(13);var f=String.fromCharCode(10);var c=r.indexOf(v)>-1;var s=r.indexOf(f)>-1;e=(r=r.replace(new RegExp(String.fromCharCode(3),"g")," ")).split(c&&s?v+f:c?v:f);while(++i<e.length)if((n=stripWhitespace(String(e[i]))).length>1&&"#"!=n.charAt(0)&&"!"!=n.charAt(0)){if(l)t[t.length-1]=String(t[t.length-1]).substr(0,-1)+n;else t.push(n);l="\\"==n.charAt(n.length-1)}i=t.length;var h;var o;while(--i>-1){if(-1==(h=getSplitIndex(n=t[i]))){t.splice(i,1);continue}o=stripWhitespace(o=n.substring(0,h));r=stripWhitespace(r=n.substring(h+1));a[o]=r}return a}function getSplitIndex(r){var t=["=",":"];var a=2;var e;var i=r.length;while(--a>-1)if((e=r.indexOf(t[a]))>-1&&e<i)i=e;return i==r.length-1?-1:i}function stripWhitespace(r){return r.replace(/^[ \s]+|[ \s]+$/g,"")}var checkLicenseAndAnnoyIfInvalid=function(r){try{checkLicense(r)}catch(t){annoy(rot13("Pbhyq abg purpx yvprafr"),r)}};ShapeUtil.purpxYvprafr=function(r,t){var a=rot13(r);var e=requestedModules.find((r=>r.module===a));if(!e){e={module:a,callbacks:[],checked:false,valid:false};requestedModules.push(e)}if(t)if(e.checked){t(e.valid);return}else e.callbacks.push(t);if("function"===typeof moduleCheckFunction)moduleCheckFunction()};getLicenseData().then(checkLicenseAndAnnoyIfInvalid).catch((function(){annoy(rot13("Pbhyq abg ergevrir yvprafr"))}));