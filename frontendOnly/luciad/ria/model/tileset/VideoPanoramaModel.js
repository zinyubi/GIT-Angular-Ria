import{PanoramaType}from"./PanoramaType.js";import{PanoramaModel}from"./PanoramaModel.js";import{createPowerOfTwoStructure}from"./PanoramaTileSetStructure.js";import{PanoramicImageProjectionType}from"./PanoramicImageProjectionType.js";import{PanoramaImageryType}from"./PanoramaImageryType.js";class VideoPanoramaModel extends PanoramaModel{constructor(e){super({baseURL:"",panoramaDescriptor:{type:PanoramaType.SINGLE_IMAGE,structure:createPowerOfTwoStructure({levelCount:1,tileWidth:e.videoWidth,tileHeight:e.videoHeight,level0Rows:1,level0Columns:1}),projection:{type:PanoramicImageProjectionType.PINHOLE},imageryType:PanoramaImageryType.VIDEO}});this._video=e}getPanoramicImage(e,r,o){r(e,this._video)}}function loadVideo(e){if(e.readyState<HTMLMediaElement.HAVE_METADATA){const r=new Promise(((r,o)=>{const a=()=>{e.removeEventListener("loadedmetadata",a);r(e)};e.addEventListener("loadedmetadata",a);const t=r=>{e.removeEventListener("error",t);o(e.error?e.error:r)};e.addEventListener("error",t)}));e.load();return r}else return Promise.resolve(e)}export function createVideoPanoramaModel(e){return loadVideo(e).then((()=>new VideoPanoramaModel(e)))}