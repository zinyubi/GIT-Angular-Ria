import{WFSCapabilitiesParserV110}from"./WFSCapabilitiesParserV110.js";import{WFSCapabilitiesParserV200}from"./WFSCapabilitiesParserV200.js";import{WFSCapabilitiesUtil}from"./WFSCapabilitiesUtil.js";import{WFSVersion}from"../../ogc/WFSVersion.js";const SUPPORTED_VERSIONS=[WFSVersion.V200,WFSVersion.V110];function createParser(e,s){switch(s){case"1.1.0":return new WFSCapabilitiesParserV110(e);case"2.0.0":return new WFSCapabilitiesParserV200(e);default:throw new Error(`Can not parse unsupported WFS version: ${s}`)}}export class WFSCapabilities{constructor(e,s){this._capabilitiesXML=s;this._parser=createParser(s,e);this.version=this._parser.version;this.updateSequence=this._parser.getUpdateSequence();this.service=this._parser.getService();this.featureTypes=this._parser.getFeatureTypes();this.operations=this._parser.getOperations()}static async fromURL(e,s){const r={credentials:(s=s||{}).credentials,requestHeaders:s.requestHeaders,requestParameters:s.requestParameters};const i=WFSCapabilitiesUtil.createVersionNegotiator(e,SUPPORTED_VERSIONS,s.allowedVersions,r);const t=await i.negotiateVersion();return new WFSCapabilities(t.version,t.response)}static fromXML(e){const s=WFSCapabilitiesUtil.parseVersion(e);const r=new WFSCapabilities(s,e);return Promise.resolve(r)}}