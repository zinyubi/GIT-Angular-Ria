import{isDefined}from"../../util/Lang.js";import{XMLSchema}from"../../util/XMLSchema.js";import{freeze}from"./common/CapabilitiesParserUtil.js";import{LTSCapabilitiesOperations}from"./LTSCapabilitiesOperations.js";import{LTSCapabilitiesSchema}from"./LTSCapabilitiesSchema.js";export class LTSCapabilitiesParser{constructor(e,a){this._url=a;const i=undefined;const t=new XMLSchema(LTSCapabilitiesSchema).parse(e);this._rawCapabilities=t["Capabilities"]}parseServiceMetadata(){const e=this._rawCapabilities.ServiceMetadata;if(!isDefined(e))return null;return freeze({id:e.Id,name:e.Name,abstract:e.Abstract,keywords:e.Keyword||[]})}parseUpdateSequence(){return this._rawCapabilities.updateSequence}parseSupportedOperations(){const e=this._rawCapabilities.OperationsMetadata&&this._rawCapabilities.OperationsMetadata.Operation;const a=new LTSCapabilitiesOperations;e.forEach((e=>{const i=e.HTTPRequest||[];const t=this._parseRequests(i);a.updateOperations(e.name,freeze(t))}),this);return freeze(a)}_parseRequests(e){return e.map((e=>freeze({endPoint:e.OnlineResource&&e.OnlineResource.href||this._url,method:e.Method})),this)}}