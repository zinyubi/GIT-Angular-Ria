import{createPoint}from"../../../shape/ShapeFactory.js";import{NotImplementedError}from"../../../error/NotImplementedError.js";import{squaredDistance2D}from"../../../util/Cartesian.js";import{ClusterShapeProvider}from"./ClusterShapeProvider.js";export class ClosestToCenterClusterShapeProvider extends ClusterShapeProvider{constructor(){super()}getAdvancedLocation(e){const t=getClosestPoint(e);if(t){const{x:e,y:o}=t.modelLocation;return createPoint(t.modelLocation.reference,[e,o,0])}return null}getShape(e){throw new NotImplementedError("Should not call this method, it needs the more powerful one.")}}function getClosestPoint(e){if(2===e.length)return getClosestPointIdempotentMode(e[0],e[1]);let t=0;let o=0;const r=e.length;for(let n=0;n<r;n++){const r=e[n];t+=r.viewLocation.x;o+=r.viewLocation.y}const n=t/r;const s=o/r;let i=null;let l=Number.POSITIVE_INFINITY;for(let t=0;t<r;t++){const o=e[t];const{x:r,y:c}=o.viewLocation;const a=squaredDistance2D(r,c,n,s);if(a<l){l=a;i=o}}return i}function getClosestPointIdempotentMode(e,t){const o=e.worldLocation;const r=t.worldLocation;if(o.x<r.x)return t;else if(o.x===r.x)if(o.y<r.y)return t;else if(o.y===r.y)return o.z<r.z?t:e;else return e;else return e}