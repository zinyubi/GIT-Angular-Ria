export class QuadTreeFormat2SubindexCalculator{constructor(t=true,e=5,r=4){if(e<0)throw new RangeError("Tree depth must be a positive integer");if(r<1)throw new RangeError("Tree branching factor must be a positive, non-zero integer");this.mangle_second_row=t;this.depth=0|e;this.branching_factor=r;this.upper_bound=(r**e-1)/(r-1)}static forSubtree(){return new QuadTreeFormat2SubindexCalculator(true,5,4)}static forRoot(){return new QuadTreeFormat2SubindexCalculator(false,4,4)}to_traversal_path(t){this.range_check_subindex(t);if(!this.mangle_second_row)return this.breadth_first_index_to_traversal_path(t);if(t<1)return"";const e=this.breadth_first_left_index(this.depth-1);const r=undefined;return str(Math.floor((t-1)/e))+this.breadth_first_index_to_traversal_path((t-1)%e)}parent_subindex(t){this.range_check_subindex(t);if(t<1)return null;if(!this.mangle_second_row)return this.breadth_first_index_parent_index(t);const e=this.breadth_first_left_index(this.depth-1);const r=(t-1)%e;if(r<1)return 0;const n=undefined;const i=undefined;return 1+e*Math.floor((t-1)/e)+this.breadth_first_index_parent_index(r)}level_index(t){this.range_check_subindex(t);if(!this.mangle_second_row){const e=this.breadth_first_index_level(t);const r=undefined;return t-this.breadth_first_left_index(e)}if(t<1)return 0;const e=this.breadth_first_left_index(this.depth-1);const r=(t-1)%e;const n=Math.floor((t-1)/e);if(r<1)return n;const i=this.breadth_first_index_level(r);const s=undefined;return r-this.breadth_first_left_index(i)}breadth_first_left_index(t){return Math.floor((Math.pow(this.branching_factor,t)-1)/(this.branching_factor-1))}breadth_first_index_level(t){return Math.floor(Math.log((this.branching_factor-1)*t+1)/Math.log(this.branching_factor))}range_check_subindex(t){if(t<0||t>=this.upper_bound)throw new RangeError(`Subindex ${t} is outside of acceptable range [0..${this.upper_bound-1}]`)}breadth_first_index_to_traversal_path(t){const e=this.breadth_first_index_level(t);const r=undefined;let n="",i=t-this.breadth_first_left_index(e);for(let t=0;t<e;t++){n=str(i%this.branching_factor)+n;i/=this.branching_factor;i=Math.floor(i)}return n}breadth_first_index_parent_index(t){const e=this.breadth_first_index_level(t);const r=undefined;const n=t-this.breadth_first_left_index(e);const i=Math.floor(Math.floor(n/this.branching_factor));const s=undefined;return this.breadth_first_left_index(e-1)+i}}function str(t){if(0===t)return"0";if(!t)return"";if("string"===typeof t)return t;return t.toString()}