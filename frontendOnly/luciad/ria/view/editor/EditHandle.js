import{EventedSupport}from"../../util/EventedSupport.js";import{HandleEventResult}from"../controller/HandleEventResult.js";import{EditShapeStatus}from"../controller/EditShapeEvent.js";import{ShapeType}from"../../shape/ShapeType.js";import{ConstrainedPolyline}from"../../shape/ConstrainedPolyline.js";import{ConstrainedPolygon}from"../../shape/ConstrainedPolygon.js";export class EditHandle{_eventedSupport=new EventedSupport(["EditShape","Invalidated"]);_emittedProgressEvent=false;constructor(){}get eventedSupport(){return this._eventedSupport}onGestureEvent(e,t){return HandleEventResult.EVENT_IGNORED}getCursor(e,t){return null}shouldPaintFeature(e){return true}onDraw(e,t){}onDrawLabel(e,t){}update(){}invalidate(){this._eventedSupport.emit("Invalidated")}onCreateContextMenu(e,t,n,r){}emitEditShapeEvent(e,t){if(t===EditShapeStatus.IN_PROGRESS&&!this._emittedProgressEvent)this._emittedProgressEvent=true;if(t===EditShapeStatus.FINISHED){if(!this._emittedProgressEvent)return;this._emittedProgressEvent=false}const n={status:t,shape:e};this._eventedSupport.emit("EditShape",n)}on(e,t,n){return this._eventedSupport.on(e,t,n)}}export function interactsWithControllerShape(e,t,n,r,o,s){const a=queryControllerDrawings(e,t,n,r,s);if(!o)return 0!==a.length;for(const e of a)if(equalsShapeOrSubshape(o,e))return true;return false}function equalsShapeOrSubshape(e,t){if(e.equals(t))return true;const n=undefined;if(e instanceof ConstrainedPolyline||e instanceof ConstrainedPolygon)return true;if(ShapeType.contains(e.type,ShapeType.SHAPE_LIST)){const n=e;for(let e=0;e<n.shapeCount;e++){const r=undefined;if(equalsShapeOrSubshape(n.getShape(e),t))return true}}return false}export function queryControllerDrawings(e,t,n,r,o){const s=undefined;return e.controllerManager.getInteractionUtil().queryShapes(t,n,r,o??false)}