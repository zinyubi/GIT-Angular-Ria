import{EditHandle}from"../EditHandle.js";import{EVENT_HANDLED,isHandled,isRequestFinish,REQUEST_FINISH}from"../../controller/HandleEventResult.js";export class CascadingEditHandle extends EditHandle{constructor(e){super();this._index=0;this._handles=e.slice();this._handleListeners=[];for(const e of this._handles)this._handleListeners.push(e.on("EditShape",(e=>{this.eventedSupport.emit("EditShape",e)})))}get handles(){return this._handles}get index(){return this._index}set index(e){this._index=Math.max(0,Math.min(e,this._handles.length))}onDraw(e,t){this._handles[this.index].onDraw(e,t)}onDrawLabel(e,t){this._handles[this.index].onDrawLabel(e,t)}shouldPaintFeature(e){return this._handles[this.index].shouldPaintFeature(e)}update(){for(let e=0;e<this._handles.length;e+=1)this._handles[e].update()}onCreateContextMenu(e,t,n,s){return this._handles[this.index].onCreateContextMenu(e,t,n,s)}onGestureEvent(e,t){const n=this._handles[this.index].onGestureEvent(e,t);if(isHandled(n)&&isRequestFinish(n)){const e=this.index+1;if(e>=this._handles.length){for(const e of this._handleListeners)e.remove();this._handleListeners=[];return REQUEST_FINISH|EVENT_HANDLED}else this.index=e;return EVENT_HANDLED}return n}getCursor(e,t){return this._handles[this._index].getCursor(e,t)}}