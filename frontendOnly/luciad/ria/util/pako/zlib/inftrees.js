import{common as utils}from"../utils/common.js";var MAXBITS=15;var ENOUGH_LENS=852;var ENOUGH_DISTS=592;var CODES=0;var LENS=1;var DISTS=2;var lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0];var lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78];var dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0];var dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];export var inftrees=function r(a,e,f,i,v,S,t,l){var s=l.bits;var o=0;var E=0;var n=0,u=0;var I=0;var N=0;var T=0;var b=0;var B=0;var D=0;var O;var A;var L;var M;var X;var m=null;var G=0;var H;var U=new utils.Buf16(MAXBITS+1);var _=new utils.Buf16(MAXBITS+1);var d=null;var w=0;var x,k,c;for(o=0;o<=MAXBITS;o++)U[o]=0;for(E=0;E<i;E++)U[e[f+E]]++;I=s;for(u=MAXBITS;u>=1;u--)if(0!==U[u])break;if(I>u)I=u;if(0===u){v[S++]=1<<24|64<<16|0;v[S++]=1<<24|64<<16|0;l.bits=1;return 0}for(n=1;n<u;n++)if(0!==U[n])break;if(I<n)I=n;b=1;for(o=1;o<=MAXBITS;o++){b<<=1;if((b-=U[o])<0)return-1}if(b>0&&(a===CODES||1!==u))return-1;_[1]=0;for(o=1;o<MAXBITS;o++)_[o+1]=_[o]+U[o];for(E=0;E<i;E++)if(0!==e[f+E])t[_[e[f+E]]++]=E;if(a===CODES){m=d=t;H=19}else if(a===LENS){m=lbase;G-=257;d=lext;w-=257;H=256}else{m=dbase;d=dext;H=-1}D=0;E=0;o=n;X=S;N=I;T=0;L=-1;M=(B=1<<I)-1;if(a===LENS&&B>ENOUGH_LENS||a===DISTS&&B>ENOUGH_DISTS)return 1;for(;;){x=o-T;if(t[E]<H){k=0;c=t[E]}else if(t[E]>H){k=d[w+t[E]];c=m[G+t[E]]}else{k=32+64;c=0}O=1<<o-T;n=A=1<<N;do{v[X+(D>>T)+(A-=O)]=x<<24|k<<16|c|0}while(0!==A);O=1<<o-1;while(D&O)O>>=1;if(0!==O){D&=O-1;D+=O}else D=0;E++;if(0===--U[o]){if(o===u)break;o=e[f+t[E]]}if(o>I&&(D&M)!==L){if(0===T)T=I;X+=n;b=1<<(N=o-T);while(N+T<u){if((b-=U[N+T])<=0)break;N++;b<<=1}B+=1<<N;if(a===LENS&&B>ENOUGH_LENS||a===DISTS&&B>ENOUGH_DISTS)return 1;v[L=D&M]=I<<24|N<<16|X-S|0}}if(0!==D)v[X+D]=o-T<<24|64<<16|0;l.bits=I;return 0};