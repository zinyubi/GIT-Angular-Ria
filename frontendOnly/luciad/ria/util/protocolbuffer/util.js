import{constructors}from"./constructors.js";import{isEnum}from"./interfaces.js";import{roots}from"./roots.js";import*as base64 from"./util/base64.js";import{codegen}from"./util/codegen.js";import{isInteger,isObject,isSet,isString}from"./util/lang.js";import{Long}from"./util/Long.js";import{key64Re,lcFirst,merge,newBuffer,oneOfGetter,oneOfSetter,ProtocolError}from"./util/util.js";export{merge,oneOfGetter,oneOfSetter,codegen,lcFirst,newBuffer,isSet,base64,Long,isObject,ProtocolError,isString,key64Re,isInteger};export function toArray(e){if(e){const t=Object.keys(e);const r=new Array(t.length);let o=0;while(o<t.length)r[o]=e[t[o++]];return r}return[]}const safePropBackslashRe=/\\/g;const safePropQuoteRe=/"/g;export function isReserved(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)}export function safeProp(e){if(!/^[$\w_]+$/.test(e)||isReserved(e))return`["${e.replace(safePropBackslashRe,"\\\\").replace(safePropQuoteRe,'\\"')}"]`;return"."+e}export function ucFirst(e){return e.charAt(0).toUpperCase()+e.substring(1)}const camelCaseRe=/_([a-z])/g;export function camelCase(e){return e.substring(0,1)+e.substring(1).replace(camelCaseRe,(function(e,t){return t.toUpperCase()}))}export function compareFieldsById(e,t){return e.id-t.id}export function decorateType(e,t){if(e.$type){if(t&&e.$type.name!==t){decorateRoot().remove(e.$type);e.$type.name=t;decorateRoot().add(e.$type)}return e.$type}const r=new constructors.Type(t||e.name);decorateRoot().add(r);r.ctor=e;Object.defineProperty(e,"$type",{value:r,enumerable:false});Object.defineProperty(e.prototype,"$type",{value:r,enumerable:false});return r}let decorateEnumIndex=0;export function decorateEnum(e){if(isEnum(e))return e.$type;const t=new constructors.Enum(`Enum${decorateEnumIndex++}`,e);decorateRoot().add(t);Object.defineProperty(e,"$type",{value:t,enumerable:false});return t}export function setProperty(e,t,r){function o(e,t,r){const n=t.shift();if(t.length>0)e[n]=o(e[n]||{},t,r);else{const t=e[n];if(t)r=[].concat(t).concat(r);e[n]=r}return e}if("object"!==typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return o(e,t.split("."),r)}function decorateRoot(){return roots.decorated||(roots.decorated=new constructors.Root)}export function isReservedId(e,t){if(e)for(let r=0;r<e.length;++r)if("string"!==typeof e[r]&&e[r][0]<=t&&e[r][1]>=t)return true;return false}export function isReservedName(e,t){if(e)for(let r=0;r<e.length;++r)if(e[r]===t)return true;return false}