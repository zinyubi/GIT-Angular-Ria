export class EventEmitter{constructor(){this._listeners={}}on(t,s,e){(this._listeners[t]||(this._listeners[t]=[])).push({fn:s,ctx:e||this});return this}off(t,s){if(void 0===t)this._listeners={};else if(void 0===s)this._listeners[t]=[];else{const e=this._listeners[t];for(let t=0;t<e.length;)if(e[t].fn===s)e.splice(t,1);else++t}return this}emit(t,...s){const e=this._listeners[t];if(e){const t=[];for(let s=1;s<arguments.length;)t.push(arguments[s++]);for(let s=0;s<e.length;)e[s].fn.apply(e[s++].ctx,t)}return this}}