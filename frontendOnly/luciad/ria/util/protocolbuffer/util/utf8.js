export function length(e){let t=0;let n=0;for(let i=0;i<e.length;++i){n=e.charCodeAt(i);if(n<128){t+=1;continue}if(n<2048){t+=2;continue}if(55296===(64512&n)&&56320===(64512&e.charCodeAt(i+1))){++i;t+=4;continue}t+=3}return t}export function read(e,t,n){const i=undefined;if(n-t<1)return"";let r=null;const o=[];let l=0;let f;while(t<n){f=e[t++];if(f<128)o[l++]=f;else if(f>191&&f<224)o[l++]=(31&f)<<6|63&e[t++];else if(f>239&&f<365){f=((7&f)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536;o[l++]=55296+(f>>10);o[l++]=56320+(1023&f)}else o[l++]=(15&f)<<12|(63&e[t++])<<6|63&e[t++];if(l>8191){(r||(r=[])).push(String.fromCharCode.apply(String,o));l=0}}if(r){if(l)r.push(String.fromCharCode.apply(String,o.slice(0,l)));return r.join("")}return String.fromCharCode.apply(String,o.slice(0,l))}export function write(e,t,n){const i=n;for(let i=0;i<e.length;++i){let r;let o=e.charCodeAt(i);if(o<128){t[n++]=o;continue}if(o<2048){t[n++]=o>>6|192;t[n++]=63&o|128;continue}if(55296===(64512&o)&&56320===(64512&(r=e.charCodeAt(i+1)))){o=65536+((1023&o)<<10)+(1023&r);++i;t[n++]=o>>18|240;t[n++]=o>>12&63|128;t[n++]=o>>6&63|128;t[n++]=63&o|128;continue}t[n++]=o>>12|224;t[n++]=o>>6&63|128;t[n++]=63&o|128}return n-i}