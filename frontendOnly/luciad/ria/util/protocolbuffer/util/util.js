export const emptyArray=Object.freeze?.([])??[];export const emptyObject=Object.freeze?.({})??{};export function newBuffer(e=0){if("number"===typeof e)return new Uint8Array(e);const t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e[r];return t}export const key2Re=/^true|false|0|1$/;export const key32Re=/^-?(?:0|[1-9][0-9]*)$/;export const key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;export function merge(e,t,r=false){for(let n=Object.keys(t),o=0;o<n.length;++o)if(void 0===e[n[o]]||!r)e[n[o]]=t[n[o]];return e}export function lcFirst(e){return e.charAt(0).toLowerCase()+e.substring(1)}export class ProtocolError extends Error{constructor(e,t){super(e);Object.defineProperty(this,"message",{get:()=>e});Object.defineProperty(this,"stack",{value:(new Error).stack||""});this.instance=t?.instance;if(t)merge(this,t)}get name(){return"ProtocolError"}toString(){return`${this.name}: ${this.message}`}}export function oneOfGetter(e){const t={};for(let r=0;r<e.length;++r)t[e[r]]=1;return function(){const e=Object.keys(this);for(let r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}}export function oneOfSetter(e){return function(t){for(let r=0;r<e.length;++r)if(e[r]!==t)delete this[e[r]]}}export const toJSONOptions={longs:String,enums:String,bytes:String,json:true};