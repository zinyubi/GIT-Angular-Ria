import{CSSProps}from"../../../util/CSSProps.js";import{Fill}from"./Fill.js";import{Parameter}from"./Parameter.js";import{SEElement}from"./SEElement.js";import{SEElementType}from"./SEElementType.js";import{SVGParameter}from"./SVGParameter.js";const DEFAULT_HALO_RADIUS=new Parameter;DEFAULT_HALO_RADIUS.addContent("1");const DEFAULT_HALO_FILL=new Fill;const DEFAULT_HALO_FILL_COLOR=new SVGParameter("fill");DEFAULT_HALO_FILL_COLOR.addContent("#ffffff");DEFAULT_HALO_FILL.addSVGParameter(DEFAULT_HALO_FILL_COLOR);export class Halo extends SEElement{static VALID_CHILDREN=["Radius","Fill"];constructor(){super(SEElementType.HALO);this._radius=DEFAULT_HALO_RADIUS;this._fill=DEFAULT_HALO_FILL}isReady(){return null===this._fill?Promise.resolve():this._fill.isReady()}set fill(t){this._fill=t;if(!this._fill.fillColor)this._fill.addSVGParameter(DEFAULT_HALO_FILL_COLOR)}get fill(){return this._fill}set radius(t){this._radius=t;this._radius.numberValidation={name:"Radius",minValue:0,defaultValue:1};this._radius.createNumberEvaluationFunction()}get radius(){return this._radius}appendCssStyleTokens(t,e,i){const a=this.createTextShadow(t,e);i.push(CSSProps.textShadowString+":"+a)}appendTextStyle(t,e,i){i.haloWidth=2*this._radius.evaluateContentAsNumber(t,e);i.halo=this._fill.createSimpleFillStyle(t,e).color}createTextShadow(t,e){const i=this._radius.evaluateContentAsNumber(t,e);const a=this._fill.createSimpleFillStyle(t,e).color;let l="";if(a){l+=toTextShadow(i,1,1,a)+", ";l+=toTextShadow(i,1,-1,a)+", ";l+=toTextShadow(i,-1,1,a)+", ";l+=toTextShadow(i,-1,-1,a)+", ";l+=toTextShadow(i,0,-1,a)+", ";l+=toTextShadow(i,-1,0,a)+", ";l+=toTextShadow(i,1,0,a)+", ";l+=toTextShadow(i,0,1,a)}return l}}function toTextShadow(t,e,i,a){return t*e+"px "+t*i+"px "+t+"px "+a}